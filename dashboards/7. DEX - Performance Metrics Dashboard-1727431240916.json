{
  "__inputs": [
    {
      "name": "DS_PROMETHEUS",
      "label": "prometheus",
      "description": "",
      "type": "datasource",
      "pluginId": "prometheus",
      "pluginName": "Prometheus"
    }
  ],
  "__elements": {},
  "__requires": [
    {
      "type": "grafana",
      "id": "grafana",
      "name": "Grafana",
      "version": "11.1.3"
    },
    {
      "type": "datasource",
      "id": "prometheus",
      "name": "Prometheus",
      "version": "1.0.0"
    },
    {
      "type": "panel",
      "id": "stat",
      "name": "Stat",
      "version": ""
    },
    {
      "type": "panel",
      "id": "table",
      "name": "Table",
      "version": ""
    },
    {
      "type": "panel",
      "id": "text",
      "name": "Text",
      "version": ""
    }
  ],
  "annotations": {
    "list": [
      {
        "builtIn": 1,
        "datasource": {
          "type": "grafana",
          "uid": "-- Grafana --"
        },
        "enable": true,
        "hide": true,
        "iconColor": "rgba(0, 211, 255, 1)",
        "name": "Annotations & Alerts",
        "type": "dashboard"
      }
    ]
  },
  "editable": true,
  "fiscalYearStartMonth": 0,
  "graphTooltip": 0,
  "id": null,
  "links": [],
  "panels": [
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${DS_PROMETHEUS}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 7,
        "w": 6,
        "x": 0,
        "y": 0
      },
      "id": 2,
      "links": [
        {
          "targetBlank": true,
          "title": "DEX - Performance Metrics Dashboard",
          "url": "http://localhost:8084/goto/Z2EJAh3Ig?orgId=1"
        }
      ],
      "options": {
        "colorMode": "value",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "auto",
        "percentChangeColorMode": "standard",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "showPercentChange": false,
        "textMode": "auto",
        "wideLayout": true
      },
      "pluginVersion": "11.1.3",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_PROMETHEUS}"
          },
          "editorMode": "code",
          "expr": "count(analyzerperfmetrics{title=~\"First Contentful Paint|First Meaningful Paint|Speed Index|Time to Interactive|Total Blocking Time|Largest Contentful Paint|Max Potential First Input Delay\"})",
          "hide": false,
          "instant": false,
          "legendFormat": "__auto",
          "range": true,
          "refId": "A"
        }
      ],
      "title": "Performance Metric Count",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${DS_PROMETHEUS}"
      },
      "gridPos": {
        "h": 7,
        "w": 18,
        "x": 6,
        "y": 0
      },
      "id": 3,
      "options": {
        "code": {
          "language": "plaintext",
          "showLineNumbers": false,
          "showMiniMap": false
        },
        "content": "<span style=\"font-size:40px;\">Performance Group: Metrics</span>\r\n",
        "mode": "markdown"
      },
      "pluginVersion": "11.1.3",
      "type": "text"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${DS_PROMETHEUS}"
      },
      "gridPos": {
        "h": 25,
        "w": 12,
        "x": 0,
        "y": 7
      },
      "id": 4,
      "options": {
        "code": {
          "language": "plaintext",
          "showLineNumbers": false,
          "showMiniMap": false
        },
        "content": "# Performance: Metrics Audits #\n### First Contentful Paint ###\n*FCP measures how long it takes the browser to render the first piece of DOM content after a user navigates to your page, i.e., the time at which the first text or image is painted. Images, non-white `<canvas>` elements, and SVGs on your page are considered DOM content; anything inside an iframe isn't included.*\n\n*Your FCP score is a comparison of your page's FCP time and FCP times for real websites, based on data from the HTTP Archive. For example, sites performing in the ninety-ninth percentile render FCP in about 1.2 seconds. If your website's FCP is 1.2 seconds, your FCP score is 99*\n\n### Time to Interactive ###\n*Time to Interactive (TTI) is one of six metrics tracked in the Performance section of the report. Each metric captures some aspect of page load speed.*\n\n*Measuring TTI is important because some sites optimize content visibility at the expense of interactivity. This can create a frustrating user experience: the site appears to be ready, but when the user tries to interact with it, nothing happens.*\n\n*TTI measures how long it takes a page to become fully interactive. A page is considered fully interactive when:*\n- *The page displays useful content, which is measured by the First Contentful Paint*\n- *Event handlers are registered for most visible page elements*\n- *The page responds to user interactions within 50 milliseconds*\n\n### Speed Index ###\n*Speed Index measures how quickly content is visually displayed during page load. We first captures a video of the page loading in the browser and computes the visual progression between frames. Then uses the Speedline Node.js module to generate the Speed Index score. Speed Index is one of six metrics tracked in the Performance section of the report. Each metric captures some aspect of page load speed.\nAnd is displayed in seconds.*\n\n### Total Blocking Time ###\n*TBT measures the total amount of time that a page is blocked from responding to user input, such as mouse clicks, screen taps, or keyboard presses. The sum is calculated by adding the blocking portion of all long tasks between First Contentful Paint and Time to Interactive. Any task that executes for more than 50 ms is a long task. The amount of time after 50 ms is the blocking portion. For example, if Lighthouse detects a 70 ms long task, the blocking portion would be 20 ms*\n\n### Largest Contentful Paint ###\n*LCP measures when the largest content element in the viewport is rendered to the screen. This approximates when the main content of the page is visible to users.\nLargest Contentful Paint (LCP) is one of the metrics tracked in the Performance section of the report. Each metric captures some aspect of page load speed. it is displayed in seconds*\n\n### Cumulative Layout Shift ###\n*Unexpected movement of page content usually happens because resources are loaded asynchronously or DOM elements get dynamically added to the page above existing content. The culprit might be an image or video with unknown dimensions, a font that renders larger or smaller than its fallback, or a third-party ad or widget that dynamically resizes itself.*\n\n*What makes this issue even more problematic is that how a site functions in development is often quite different from how users experience it. Personalized or third-party content often doesn't behave the same in development as it does in production, test images are often already in the developer's browser cache, and API calls that run locally are often so fast that the delay isn't noticeable.*\n\n*The Cumulative Layout Shift (CLS) metric helps you address this problem by measuring how often it's occurring for real users. CLS is a measure of the largest burst of layout shift scores for every unexpected layout shift that occurs during the entire lifespan of a page. A layout shift occurs any time a visible element changes its position from one rendered frame to the next.*\n\n*A burst of layout shifts, known as a session window, is when one or more individual layout shifts occur in rapid succession with less than 1-second in between each shift and a maximum of 5 seconds for the total window duration. The largest burst is the session window with the maximum cumulative score of all layout shifts within that window.*\n\n",
        "mode": "markdown"
      },
      "pluginVersion": "11.1.3",
      "type": "text"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${DS_PROMETHEUS}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "custom": {
            "align": "left",
            "cellOptions": {
              "type": "auto"
            },
            "inspect": false
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          }
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "Web Core Vitals"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 420
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Numeric Values (lastNotNull)"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 125
              },
              {
                "id": "unit",
                "value": "ms"
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 12,
        "w": 12,
        "x": 12,
        "y": 7
      },
      "id": 5,
      "options": {
        "cellHeight": "sm",
        "footer": {
          "countRows": false,
          "fields": [
            "Count (count)"
          ],
          "reducer": [
            "sum"
          ],
          "show": true
        },
        "showHeader": true,
        "sortBy": [
          {
            "desc": true,
            "displayName": "Numeric Values (lastNotNull)"
          }
        ]
      },
      "pluginVersion": "11.1.3",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_PROMETHEUS}"
          },
          "disableTextWrap": false,
          "editorMode": "code",
          "expr": "avg by(title, numericValue) (analyzerperfmetrics{title=~\"Speed Index|First Contentful Paint|First Meaningful Paint|Largest Contentful Paint|Total Blocking Time|Cumulative Layout Shift|Max Potential First Input Delay|Time to Interactive\"})",
          "format": "table",
          "fullMetaSearch": false,
          "includeNullMetadata": true,
          "instant": false,
          "legendFormat": "__auto",
          "range": true,
          "refId": "A",
          "useBackend": false
        }
      ],
      "title": "Analyzer - Metrics",
      "transformations": [
        {
          "id": "organize",
          "options": {
            "excludeByName": {
              "Time": true,
              "Value": false
            },
            "includeByName": {},
            "indexByName": {
              "Time": 0,
              "Value": 3,
              "numericValue": 2,
              "title": 1
            },
            "renameByName": {
              "Value": "Count",
              "numericValue": "Numeric Values",
              "title": "Web Core Vitals"
            }
          }
        },
        {
          "id": "groupBy",
          "options": {
            "fields": {
              "Count": {
                "aggregations": [
                  "count"
                ],
                "operation": "aggregate"
              },
              "Numeric Values": {
                "aggregations": [
                  "lastNotNull"
                ],
                "operation": "aggregate"
              },
              "Web Core Vitals": {
                "aggregations": [],
                "operation": "groupby"
              }
            }
          }
        }
      ],
      "type": "table"
    }
  ],
  "schemaVersion": 39,
  "tags": [],
  "templating": {
    "list": [
      {
        "datasource": {
          "type": "prometheus",
          "uid": "advgjmtb35ssgc"
        },
        "filters": [],
        "hide": 0,
        "label": "Analyzer - Compare Control",
        "name": "Control",
        "skipUrlSync": false,
        "type": "adhoc"
      }
    ]
  },
  "time": {
    "from": "now-6h",
    "to": "now"
  },
  "timepicker": {},
  "timezone": "browser",
  "title": "7. DEX - Performance Metrics Dashboard",
  "uid": "cdw5tfvjqbgu8c",
  "version": 4,
  "weekStart": ""
}